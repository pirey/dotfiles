#!/bin/sh

# doftiles directory
DOTFILES="$HOME/dotfiles"
if [ "$1" != "" ]; then
    DOTFILES=$1
fi

# uninstall first
$DOTFILES/bin/uninstall

# TODO get all files dynamically
echo "-> creating symlinks..."

# make sure there is .config folder
mkdir -p $HOME/.config

# tmux
ln -sf $DOTFILES/.tmux.conf ~/.tmux.conf

# global config
ln -sf $DOTFILES/home/.agignore ~/.agignore
ln -sf $DOTFILES/home/.ctags ~/.ctags
ln -sf $DOTFILES/home/.gitconfig ~/.gitconfig
ln -sf $DOTFILES/home/.gitignore_global ~/.gitignore_global
ln -sf $DOTFILES/home/.editorconfig ~/.editorconfig
ln -sf $DOTFILES/home/.npmrc ~/.npmrc

# sh
ln -sf $DOTFILES/home/.aliases ~/.aliases
ln -sf $DOTFILES/home/.zshrc ~/.zshrc

# .config
ln -sf $DOTFILES/home/.config/nvim ~/.config
ln -sf $DOTFILES/home/.config/i3 ~/.config
ln -sf $DOTFILES/home/.config/i3status ~/.config
ln -sf $DOTFILES/home/.config/volumeicon ~/.config
ln -sf $DOTFILES/home/.config/rofi ~/.config

# custom scripts
mkdir -p $HOME/.local/bin
ln -sf $DOTFILES/home/.local/bin/fuzzy_lock.sh ~/.local/bin/fuzzy_lock.sh


echo "OK symlinks created"

# echo "-> installing vim plugins..."
# vim "+PlugInstall! | qa!"
# echo "OK vim plugins installed"

echo "-> installing neovim plugins..."
nvim "+PlugInstall! | qa!"
echo "OK neovim plugins installed"

echo "OK All clear"
